// print out sum of 3 numbers
// output:
// 255
// 22
// 19
// 296

(:main
	(:main
		0 0
    %a <- 9       // 1001
    %b <- 11      // 1011
    %b <<= 2      // 101100
    %b++          // 101101, 22
    %c <- 13      // 1101
    %c *= 3       // 100111, 19

    cjump %a <= 13 :small :big
    :small
    %a <<= 3      // 1001000
    %a++          // 1001001
    %a *= 7       // 111111111, 255
    goto :sum

    :big
    %a -= 5
    %a++

    :sum
    // save caller saved registers
    rdi <- %a
    rsi <- %b
    rdx <- %c
    mem rsp -8 <- :printOriginal_ret
    call :printOriginal 3
    :printOriginal_ret

    rdi <- %a
    rsi <- %b
    rdx <- %c
    mem rsp -8 <- :printSum_ret
    call :printSum 3
    :printSum_ret
		return
  )

  (:printOriginal
    3 0
    %b <- rsi
    %c <- rdx
    call print 1
    rdi <- %b
    call print 1
    rdi <- %c
    call print 1
    return
  )

  (:printSum
    3 0
    rdi >>= 1
    rsi >>= 1
    rdx >>= 1
    rdi += rsi
    rdi += rdx     // 0100101000
    rdi <<= 1      // 01001010000
    rdi++          // 01001010001, 296=22+19+255
    call print 1
    return
  )
)
