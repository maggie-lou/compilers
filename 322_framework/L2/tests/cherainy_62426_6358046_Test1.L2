// modify an array based on its first two elements
// output:
// 3
// {s:3, 5, 5, 5}
// {s:3, 44, 27, 9}

(:main
 (:main
  0 0
  %length <- 7
    %initial <- 11
    rdi <- %length
    rsi <- %initial
    call allocate 2
    %array <- rax
    rdi <- %length
    call print 1
    rdi <- %array
    call print 1
    rdx <- mem %array 8
    rdx += mem %array 16

    cjump rdx < 25 :increase :decrease

    :increase
    r10 <- mem %array 8  // 1011
    r10 <<= 3         // 1011000
    r10++             // 1011001, 44
    mem %array 8 <- r10
    r11 <- mem %array 16 // 1011
    r11 *= 5          // 110111, 27
    mem %array 16 <- r11
    r12 <- mem %array 24 // 1011
    r12 += 7          // 10010
    r12++             // 10011, 9
    mem %array 24 <- r12
    goto :final

    :decrease
    mem %array 8 -= 5
    mem %array 16 -= 7

    :final
		rdi <- %array
    call print 1
  return
  )
)
